{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\n\nfunction GameFilterComponent_aside_0_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵelementStart(1, \"input\", 7);\n    i0.ɵɵlistener(\"change\", function GameFilterComponent_aside_0_div_4_Template_input_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return ctx_r3.setCurrentPrice($event);\n    })(\"input\", function GameFilterComponent_aside_0_div_4_Template_input_input_1_listener($event) {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return ctx_r5.setCurrentPrice($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"min\", ctx_r1.priceRange.min);\n    i0.ɵɵpropertyInterpolate(\"max\", ctx_r1.priceRange.max);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r1.currentPrice);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.currentPrice, \" UAH\");\n  }\n}\n\nfunction GameFilterComponent_aside_0_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵelement(1, \"input\", 9);\n    i0.ɵɵelementStart(2, \"label\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tag_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", tag_r6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", tag_r6[0].toLocaleUpperCase() + tag_r6.slice(1), \" \");\n  }\n}\n\nfunction GameFilterComponent_aside_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"aside\", 1);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"p\", 2);\n    i0.ɵɵtext(3, \"Filter by price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, GameFilterComponent_aside_0_div_4_Template, 4, 4, \"div\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵelementStart(6, \"p\", 2);\n    i0.ɵɵtext(7, \"Filter by tag\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 4);\n    i0.ɵɵlistener(\"change\", function GameFilterComponent_aside_0_Template_div_change_8_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.pickTag();\n    });\n    i0.ɵɵtemplate(9, GameFilterComponent_aside_0_div_9_Template, 4, 2, \"div\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.priceRange);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.possibleTagOptions);\n  }\n}\n\nexport let GameFilterComponent = /*#__PURE__*/(() => {\n  class GameFilterComponent {\n    constructor() {\n      this.possibleTagOptions = ['indie', 'action', 'adventure'];\n      this.tags = [];\n      this.srcStr = '';\n      this.games = [];\n      this.curPrice = new EventEmitter();\n      this.gameTypes = new EventEmitter();\n    }\n\n    ngOnInit() {\n      console.log(\"from filter\", this.games);\n      this.setPricesRange();\n    }\n\n    setPricesRange() {\n      const prices = this.games.map(g => g.price);\n      this.priceRange = {\n        min: Math.min(...prices),\n        max: Math.max(...prices)\n      };\n      this.currentPrice = this.priceRange.max;\n      this.curPrice.emit(this.currentPrice);\n    }\n\n    setCurrentPrice(event) {\n      this.currentPrice = +event.target.value;\n      this.curPrice.emit(this.currentPrice);\n    }\n\n    pickTag() {\n      // Renderer2!!!!!!!!\n      this.tags = [];\n      const checked = document.querySelectorAll('input[name=tag]:checked');\n\n      for (let i = 0; i < checked.length; i++) {\n        this.tags.push(checked[i].getAttribute('value'));\n      }\n\n      this.gameTypes.emit(this.tags);\n    }\n\n  }\n\n  GameFilterComponent.ɵfac = function GameFilterComponent_Factory(t) {\n    return new (t || GameFilterComponent)();\n  };\n\n  GameFilterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: GameFilterComponent,\n    selectors: [[\"app-game-filter\"]],\n    inputs: {\n      games: \"games\"\n    },\n    outputs: {\n      curPrice: \"curPrice\",\n      gameTypes: \"gameTypes\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"px-3\", 4, \"ngIf\"], [1, \"px-3\"], [1, \"heading-custom\", \"pb-2\"], [\"class\", \"d-block input-group price-range text-center px-1\", 4, \"ngIf\"], [1, \"px-1\", 3, \"change\"], [\"class\", \"form-check\", 4, \"ngFor\", \"ngForOf\"], [1, \"d-block\", \"input-group\", \"price-range\", \"text-center\", \"px-1\"], [\"type\", \"range\", \"id\", \"rangeinput\", \"step\", \"1\", 1, \"form-control-range\", \"slider\", \"custom-range\", \"w-100\", 3, \"min\", \"max\", \"value\", \"change\", \"input\"], [1, \"form-check\"], [\"type\", \"checkbox\", \"name\", \"tag\", 1, \"form-check-input\", 3, \"value\"], [\"for\", \"flexCheckIndeterminate\", 1, \"form-check-label\"]],\n    template: function GameFilterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, GameFilterComponent_aside_0_Template, 10, 2, \"aside\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.games.length > 0);\n      }\n    },\n    directives: [i1.NgIf, i1.NgForOf],\n    encapsulation: 2\n  });\n  return GameFilterComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}