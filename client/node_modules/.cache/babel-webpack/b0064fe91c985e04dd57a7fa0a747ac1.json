{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/games.service\";\nimport * as i2 from \"src/app/shared/services/user.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../games-page/game-item/game-item.component\";\n\nfunction LibraryPageComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \" \");\n  }\n}\n\nfunction LibraryPageComponent_div_4_app_game_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-game-item\", 8);\n  }\n\n  if (rf & 2) {\n    const g_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"isOwned\", true)(\"game\", g_r4);\n  }\n}\n\nfunction LibraryPageComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6);\n    i0.ɵɵtemplate(1, LibraryPageComponent_div_4_app_game_item_1_Template, 1, 2, \"app-game-item\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.gamesList);\n  }\n}\n\nfunction LibraryPageComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 9);\n    i0.ɵɵtext(2, \" You don`t have saved games! \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let LibraryPageComponent = /*#__PURE__*/(() => {\n  class LibraryPageComponent {\n    constructor(gameService, userService) {\n      this.gameService = gameService;\n      this.userService = userService;\n      this.errorMessage = '';\n    }\n\n    ngOnInit() {\n      this.user = this.userService.getCurrentUserInfo();\n\n      if (!this.user.gamesList) {\n        this.user.gamesList = [];\n      }\n\n      this.gameService.getAllGames().subscribe(res => {\n        this.allGames = Object.keys(res).map(key => {\n          res[key].id = key;\n          return res[key];\n        });\n        this.filterGames();\n      }, err => {\n        this.errorMessage = err.message;\n        setTimeout(() => {\n          this.errorMessage = '';\n        });\n      });\n    }\n\n    filterGames() {\n      if (this.user.gamesList && this.user.gamesList.length > 0) {\n        const userGames = this.user.gamesList.map(g => g.id);\n        this.gamesList = this.allGames.filter(g => userGames.includes(g.id));\n      }\n    }\n\n  }\n\n  LibraryPageComponent.ɵfac = function LibraryPageComponent_Factory(t) {\n    return new (t || LibraryPageComponent)(i0.ɵɵdirectiveInject(i1.GameService), i0.ɵɵdirectiveInject(i2.UserService));\n  };\n\n  LibraryPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LibraryPageComponent,\n    selectors: [[\"app-library-page\"]],\n    decls: 6,\n    vars: 3,\n    consts: [[1, \"custom-container\", \"bg-light\", \"p-4\"], [1, \"heading-custom\", \"px-5\", \"pb-2\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [\"class\", \"games-list\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"alert\", \"alert-danger\"], [1, \"games-list\"], [3, \"isOwned\", \"game\", 4, \"ngFor\", \"ngForOf\"], [3, \"isOwned\", \"game\"], [\"role\", \"alert\", 1, \"alert\", \"alert-primary\", \"mx-5\"]],\n    template: function LibraryPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"p\", 1);\n        i0.ɵɵtext(2, \"My games\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, LibraryPageComponent_div_3_Template, 2, 1, \"div\", 2);\n        i0.ɵɵtemplate(4, LibraryPageComponent_div_4_Template, 2, 1, \"div\", 3);\n        i0.ɵɵtemplate(5, LibraryPageComponent_div_5_Template, 3, 0, \"div\", 4);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.gamesList);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.gamesList || ctx.gamesList.length == 0);\n      }\n    },\n    directives: [i3.NgIf, i3.NgForOf, i4.GameItemComponent],\n    styles: [\".games-list[_ngcontent-%COMP%]{width:80%;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));grid-row-gap:20px}@media screen and (max-width: 576px){.games-list[_ngcontent-%COMP%]{width:100%}}\"]\n  });\n  return LibraryPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}